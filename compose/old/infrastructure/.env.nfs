# NFS configuration settings - only used when UNIFY_WITH_NFS_MOUNTING is set
# These are set automatically based on presence of UNIFY_WITH_NFS_MOUNTING

# NFS server is the manager node hostname
NFS_SERVER=${NFS_SERVER:-manager-node-hostname} # The hostname of the manager node (where the NFS server runs).

# Default to local driver when not unified, nfs when unified
NFS_VOLUME_DRIVER=${UNIFY_WITH_NFS_MOUNTING:+nfs} # Dynamically set the volume driver based on UNIFY_WITH_NFS_MOUNTING.

# NFS options - set only when UNIFY_WITH_NFS_MOUNTING is defined
NFS_OPTS=${UNIFY_WITH_NFS_MOUNTING:+type: nfs} # Set the NFS type.
# Use recommended NFS mount options for performance and reliability.
# 'addr' is the NFS server address.
# 'rw' allows read-write access.
# 'noatime' disables access time updates (improves performance).
# 'rsize' and 'wsize' set read/write buffer sizes (8KB is a good default).
# 'timeo' sets the timeout for NFS operations (1.4 seconds).
# 'nfsvers=4' specifies NFS version 4 (recommended).
# 'async' allows asynchronous writes (better performance, some risk of data loss on server crash).
# 'soft' means that the client will retry a failed NFS request a few times, then give up (avoids hanging).
NFS_OPTS=${UNIFY_WITH_NFS_MOUNTING:+o: "addr=${NFS_SERVER},rw,noatime,rsize=8192,wsize=8192,timeo=14,nfsvers=4,async,soft"}
NFS_OPTS=${UNIFY_WITH_NFS_MOUNTING:+device: ":/data"}  # The NFS export path (':/data' because of the volume mount in the NFS service). 