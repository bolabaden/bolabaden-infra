# Production Configuration Template
# This is a template for production deployments
# Copy and customize for your environment

domain: yourdomain.com
stack_name: production
node_name: node1  # Set per node

# Paths - adjust for your deployment
config_path: /opt/infra/volumes
secrets_path: /opt/infra/secrets
root_path: /opt/infra
data_dir: /opt/infra/data

# Traefik configuration
traefik:
  web_port: 80
  websecure_port: 443
  error_pages_middleware: "error-pages@file"
  crowdsec_middleware: "crowdsec@file"
  strip_www_middleware: "strip-www@file"
  cert_resolver: "letsencrypt"
  http_provider_port: 8081
  cloudflare_trusted_ips:
    - "103.21.244.0/22"
    - "103.22.200.0/22"
    - "103.31.4.0/22"
    - "104.16.0.0/13"
    - "104.24.0.0/14"
    - "108.162.192.0/18"
    - "131.0.72.0/22"
    - "141.101.64.0/18"
    - "162.158.0.0/15"
    - "172.64.0.0/13"
    - "173.245.48.0/20"
    - "188.114.96.0/20"
    - "190.93.240.0/20"
    - "197.234.240.0/22"
    - "198.41.128.0/17"
    - "2400:cb00::/32"
    - "2405:8100::/32"
    - "2405:b500::/32"
    - "2606:4700::/32"
    - "2803:f800::/32"
    - "2a06:98c0::/29"
    - "2c0f:f248::/32"

# DNS configuration
dns:
  provider: cloudflare
  domain: yourdomain.com
  # Set via environment variables:
  # CLOUDFLARE_API_KEY
  # CLOUDFLARE_ZONE_ID

# Cluster configuration
cluster:
  bind_port: 7946
  raft_port: 8300
  api_port: 8080
  priority: 100  # Lower = higher priority

# Middleware configuration
middlewares:
  error_pages_enabled: true
  error_pages_name: "error-pages"
  crowdsec_enabled: true
  crowdsec_name: "crowdsec"
  strip_www_enabled: true
  strip_www_name: "strip-www"

# Docker registry configuration
registry:
  image_prefix: "docker.io/yourorg"  # Set your organization
  default_registry: "docker.io"
